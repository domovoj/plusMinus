!function($,isTouch){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0;c<this.length;c++)if(this[c]===a)return c;return-1});var methods={destroy:function(){var a=$(this),b=a.data("plusMinus");if(b){var c=$([]);b.next&&(b.next.data("plusminusDisabled")?b.next.attr("disabled","disabled"):b.next.removeAttr("disabled"),c=c.add(b.next)),b.prev&&(b.prev.data("plusminusDisabled")?b.prev.attr("disabled","disabled"):b.prev.removeAttr("disabled"),c=c.add(b.prev)),c&&c.off("mouseenter."+$.plusMinus.nS).off("mouseleave."+$.plusMinus.nS).off("click."+$.plusMinus.nS).off("mouseup."+$.plusMinus.nS).off("mousedown."+$.plusMinus.nS).removeData("plusMinus").removeClass("plusMinus-disabled plusMinus-enabled"),a.val(b.bval).off("input."+$.plusMinus.nS).removeData("plusMinus")}return a},init:function(options){if(options=options||{},this.length>0){var settings=$.extend({},$.plusMinus.dP,options);return this.each(function(){var input=$(this),data=input.data();methods.destroy.call(input);var opt=$.extend({},settings,data);opt.next="string"==typeof opt.next?methods._checkBtn.call(input,opt.next.split(".")):opt.next,opt.prev="string"==typeof opt.prev?methods._checkBtn.call(input,opt.prev.split(".")):opt.prev,opt.bval=+input.val(),opt.callbacks={before:{beforeG:$.plusMinus.dP.before,before:options.before,beforeEl:eval("("+data.before+")")},after:{afterG:$.plusMinus.dP.after,after:options.after,afterEl:eval("("+data.after+")")}},delete opt.before,delete opt.after;var dP={input:input};opt.mouseDownChange&&(dP.interval=[]),opt.next&&opt.next.data("plusMinus",$.extend({next:!0},dP)).data("plusminusDisabled",opt.next.is(":disabled")?!0:!1),opt.prev&&opt.prev.data("plusMinus",$.extend({next:!1},dP)).data("plusminusDisabled",opt.prev.is(":disabled")?!0:!1),input.data("plusMinus",opt),methods.testNumber.call(input,!0);var inputJS=$(this).get(0);"onpropertychange"in inputJS?inputJS.onpropertychange=function(){"value"===event.propertyName&&methods.testNumber.call(input)}:input.on("input."+$.plusMinus.nS,function(a){methods.testNumber.call($(this))});var btns=$([]);opt.next&&(btns=btns.add(opt.next)),opt.prev&&(btns=btns.add(opt.prev)),btns&&opt.mouseenter&&btns.on("mouseenter."+$.plusMinus.nS,function(a){var b=$(this);b.data("plusMinus").resMouseEnter=opt.mouseenter.call(b,input,b.data("plusMinus").next?"plus":"minus")}),btns&&opt.mouseleave&&btns.on("mouseleave."+$.plusMinus.nS,function(a){var b=$(this);opt.mouseleave.call(b,input,b.data("plusMinus").next?"plus":"minus",b.data("plusMinus").resMouseEnter)}),btns.on("click."+$.plusMinus.nS,function(a){methods._changeCount.call(this,$(this).data("plusMinus"))}).on("mouseup."+$.plusMinus.nS,function(a){isTouch||input.focus()}),opt.mouseDownChange&&btns.on("mousedown."+$.plusMinus.nS,function(a){var b=this,c=$(b).data("plusMinus");c.interval[0]=setTimeout(function(){c.interval[1]=setInterval(function(){methods._changeCount.call(b,c)},opt.factor)},opt.delay),$(window).off("mouseup."+$.plusMinus.nS).on("mouseup."+$.plusMinus.nS,function(a){clearTimeout(c.interval[0]),clearInterval(c.interval[1])})})})}return this},plus:function(){var a=$(this),b=a.data("plusMinus").next;return methods._changeCount.call(b,b.data("plusMinus")),a},minus:function(){var a=$(this),b=a.data("plusMinus").prev;return methods._changeCount.call(b,b.data("plusMinus")),a},getValue:function(a){var b=$(this),c=b.data("plusMinus");return methods._valS(void 0!==a?a:b.val().replace(c.sufix?c.sufix:"","").replace(c.prefix?c.prefix:"",""),c.divider)},setValue:function(a,b,c){function d(){e.val((f.prefix?f.prefix:"")+g+(f.sufix?f.sufix:"")),b||(h=e.val().toString().length+1),methods._setCursorPosition.call(e,h-((f.val?f.val.toString().length:null)===a.toString().length?1:0),c),f.val=+a}var e=$(this),f=e.data("plusMinus"),g=methods._valF(!f.precision&&methods._isNumber(a)&&methods._isNumber(a.toString()[a.toString().length-1])?parseFloat(a):a,f.divider),h=methods._getCursorPosition.call(e);if(c||f.val===a)d();else{var i={},j=[];for(var k in f.callbacks.before)f.callbacks.before[k]&&(i[k]=f.callbacks.before[k].call(e,f),j.push(i[k]));if(e.trigger("before."+$.plusMinus.nS,f),(-1===$.inArray(!1,j)||0===j.length)&&(d(),e.trigger("after."+$.plusMinus.nS,f),!c))for(var k in f.callbacks.after)f.callbacks.after[k]&&f.callbacks.after[k].call(e,f,i)}return f.prev&&!methods._nextValue.call(e,+a,!1).toString().match(f.pattern)&&methods._disabled.call(f.prev),f.next&&!methods._nextValue.call(e,+a,!0).toString().match(f.pattern)&&methods._disabled.call(f.next),a},testNumber:function(a){var b=$(this),c=methods.getValue.call(b),d=b.data("plusMinus");return d.next&&methods._enabled.call(d.next),d.prev&&methods._enabled.call(d.prev),void 0===c||c.toString().match(d.pattern)||(c=void 0!==d.val&&d.val.toString().match(d.pattern)?d.val:d.value),c&&c.toString().match(d.pattern)&&(c<=d.min&&(c=d.min,methods._disabled.call(d.prev)),c>=d.max&&(c=d.max,methods._disabled.call(d.next))),methods.setValue.call(b,c,!0,a),b},enable:function(){var a=$(this),b=a.data("plusMinus");return b.next&&void 0!==b.next.data("plusminusDisabledC")&&b.next.data("plusminusDisabledC")===!1&&b.next.removeAttr("disabled").removeClass("plusMinus-disabled"),b.prev&&void 0!==b.prev.data("plusminusDisabledC")&&b.prev.data("plusminusDisabledC")===!1&&b.prev.removeAttr("disabled").removeClass("plusMinus-disabled"),a.removeAttr("disabled").removeClass("plusMinus-disabled").addClass("plusMinus-enabled")},disable:function(){var a=$(this),b=a.data("plusMinus");return a.hasClass("plusMinus-disabled")?a:(b.next&&(b.next.is(":disabled")?b.next.data("plusminusDisabledC",!0):b.next.data("plusminusDisabledC",!1)),b.prev&&(b.prev.is(":disabled")?b.prev.data("plusminusDisabledC",!0):b.prev.data("plusminusDisabledC",!1)),a.removeClass("plusMinus-enabled").add(b.next).add(b.prev).attr("disabled","disabled").addClass("plusMinus-disabled"))},_valF:function(a,b){return-1===a.toString().indexOf(".")?a:a.toString().replace(".",b)},_valS:function(a,b){return-1===a.toString().indexOf(b)?a:a.toString().replace(b,".")},_setCursorPosition:function(a,b){return isTouch||b||this.each(function(){this.select();try{this.setSelectionRange(a,a)}catch(b){}}),this},_getCursorPosition:function(){var a=$(this).get(0),b=0;if("selectionStart"in a)b=a.selectionStart;else if("selection"in document){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length-document.selection.createRange().text.length}return b},_nextValue:function(a,b){var c=$(this),d=c.data("plusMinus"),e=d.step.toString().split("0").length-1;return+(a+(b?d.step:-d.step)).toFixed(e)},_changeCount:function(a){var b=$(this),c=a.input.data("plusMinus"),d=a.next?c.max:c.min,e=+methods.getValue.call(a.input),f=c.step.toString().split("0").length-1,g=methods._nextValue.call(a.input,e,a.next);if(!a.next){var h=+(c.precision?(e-c.min)%c.step:parseFloat((e-c.min)%c.step)).toFixed(f);h>0&&(g=e-h),0>h&&(g=c.min)}return g=(+g).toFixed(f),d>=g&&a.next||g>=d&&!a.next?(methods._enabled.call(a.next?c.prev:c.next),methods.setValue.call(a.input,g,!0)):c.overflow&&methods.setValue.call(a.input,a.next?c.min:c.max,!0),methods._setCursorPosition.call(a.input,a.input.val().length),g!=d||c.overflow||methods._disabled.call(b),b},_enabled:function(){return $(this).removeAttr("disabled").removeClass("plusMinus-disabled").addClass("plusMinus-enabled")},_disabled:function(){var a=$(this),b=a.data("plusMinus");return b&&b.interval&&(clearTimeout(b.interval[0]),clearInterval(b.interval[1])),a.attr("disabled","disabled").addClass("plusMinus-disabled").removeClass("plusMinus-enabled")},_checkBtn:function(a){var b=$(this),c="",d="";return $.each(a,function(a,e){c=e.match(/\(.*\)/),null!==c&&(d=c.input.replace(c[0],""),c=c[0].substring(1,c[0].length-1)),null===c&&(d=e),b=b[d](c)}),b},_isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)}};$.fn.plusMinus=function(a){return methods[a]?methods[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void $.error("Method "+a+" does not exist on $.plusMinus"):methods.init.apply(this,arguments)},$.plusMinusInit=function(){this.nS="plusMinus",this.method=function(a){return/_/.test(a)?void 0:methods[a]},this.methods=function(){var a={};for(var b in methods)/_/.test(b)||(a[b]=methods[b]);return a},this.dP={prev:"prev()",next:"next()",step:1,factor:50,delay:200,value:0,pattern:/^-{0,1}\d*\.{0,1}\d*$/,divider:".",min:-(1/0),max:1/0,mouseDownChange:!0,precision:!1,before:null,after:null,prefix:null,sufix:null,overflow:!1},this.setParameters=function(a){$.extend(this.dP,a)}},$.plusMinus=new $.plusMinusInit}(jQuery,void 0!==document.createTouch);